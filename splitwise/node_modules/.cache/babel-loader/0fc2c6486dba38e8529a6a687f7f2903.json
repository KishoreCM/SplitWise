{"ast":null,"code":"var _jsxFileName = \"/home/system8/Desktop/MyFirstReactApp/Node_Sequelize/splitwise/src/components/addexpense.jsx\";\nimport React, { Component } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport AddGroup from \"../addgroupcontroller\"; //import { withRouter } from \"react-router-dom\";\n\nclass AddExpense extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.addExpense = () => {\n      let expenseName = this.refs.description.value;\n      let totalAmount = Number(this.refs.amount.value);\n      let mem_count = this.props.current_data.mem_count;\n      let amountPerHead = Number((totalAmount / Number(mem_count + 1)).toFixed(2));\n      let expenseData = new FormData();\n      expenseData.append(\"mem_count\", Number(mem_count));\n      expenseData.append(\"name\", expenseName);\n      expenseData.append(\"you_paid\", Number(totalAmount));\n      let youLent = Number((totalAmount - amountPerHead).toFixed(2));\n      expenseData.append(\"you_lent\", Number(youLent));\n      expenseData.append(\"on_month\", this.getMonth());\n      expenseData.append(\"on_date\", Number(new Date().getDate()));\n      expenseData.append(\"groups_id\", Number(this.props.current_data.id));\n      axios({\n        method: \"post\",\n        url: \"/app/add/expense\",\n        data: expenseData,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(response => console.log(response)).catch(error => console.log(error));\n      alert(\"Expense Added!\");\n      this.refs.description.value = \"\";\n      this.refs.amount.value = \"\";\n      /*\n      let expenses = this.props.current_data.expenses;\n      let expensesSize = expenses ? Object.keys(expenses).length : 0;\n      let expenseName = this.refs.description.value;\n      let totalAmount = this.refs.amount.value;\n      let { members_count } = this.props.current_data;\n      let amountPerHead = Number(\n        (Number(totalAmount) / (Number(members_count) + 1)).toFixed(2)\n      );\n       let updateCurrentData = JSON.parse(JSON.stringify(this.props.current_data));\n      console.log(this.props.current_data);\n      let newExpense = {};\n      newExpense[\"id\"] = !expensesSize ? 0 : expenses[expensesSize - 1][\"id\"] + 1;\n      newExpense[\"members_count\"] = members_count;\n      newExpense[\"expense_\" + expensesSize] = expenseName;\n      newExpense[\"youPaid_\" + expensesSize] = totalAmount;\n      newExpense[\"youLent_\" + expensesSize] = (\n        totalAmount - amountPerHead\n      ).toFixed(2);\n      newExpense[\"onMonth\"] = this.getMonth();\n      newExpense[\"onDate\"] = new Date().getDate();\n      updateCurrentData.expenses.push(newExpense);\n      for (var i = 0; i < updateCurrentData.friends_name.length; i++) {\n        updateCurrentData.friends_name[i][\"owes_\" + i] = Number(\n          (\n            updateCurrentData.friends_name[i][\"owes_\" + i] + amountPerHead\n          ).toFixed(2)\n        );\n        if (!expensesSize) {\n          updateCurrentData.friends_name[i][\"from_expense\"] = expensesSize;\n        }\n      }\n      //console.log(updateCurrentData.friends_name);\n       updateCurrentData.owed = Number(\n        (\n          Number(updateCurrentData.owed) +\n          Number((totalAmount - amountPerHead).toFixed(2))\n        ).toFixed(2)\n      );\n       //this.setState({ current_data: updateCurrentData });\n      AddGroup.setAddExpense(updateCurrentData, () => alert(\"Expense Added!\"));\n       this.refs.description.value = \"\";\n      this.refs.amount.value = \"\";\n       //this.props.history.push(\"/dashboard\");\n      */\n    };\n  }\n\n  getMonth() {\n    var months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    return months[new Date().getMonth()];\n  }\n\n  render() {\n    return React.createElement(Modal, Object.assign({}, this.props, {\n      size: \"lg\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      id: \"contained-modal-title-vcenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Add expense\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"With\", \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"you\")), \" \", \"and all of:\", \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.props.group_name)))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        marginRight: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-arrow-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Enter a description\"))), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Description\",\n      ref: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Amount in Rs.\",\n      ref: \"amount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Enter amount\")), \" \", React.createElement(\"span\", {\n      style: {\n        marginLeft: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-arrow-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.addExpense,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Add\")));\n  }\n\n}\n\nexport default AddExpense;","map":{"version":3,"sources":["/home/system8/Desktop/MyFirstReactApp/Node_Sequelize/splitwise/src/components/addexpense.jsx"],"names":["React","Component","Modal","Button","axios","AddGroup","AddExpense","addExpense","expenseName","refs","description","value","totalAmount","Number","amount","mem_count","props","current_data","amountPerHead","toFixed","expenseData","FormData","append","youLent","getMonth","Date","getDate","id","method","url","data","headers","then","response","console","log","catch","error","alert","months","render","group_name","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport AddGroup from \"../addgroupcontroller\";\n//import { withRouter } from \"react-router-dom\";\n\nclass AddExpense extends Component {\n  getMonth() {\n    var months = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"July\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\"\n    ];\n    return months[new Date().getMonth()];\n  }\n\n  addExpense = () => {\n    let expenseName = this.refs.description.value;\n    let totalAmount = Number(this.refs.amount.value);\n    let { mem_count } = this.props.current_data;\n    let amountPerHead = Number(\n      (totalAmount / Number(mem_count + 1)).toFixed(2)\n    );\n\n    let expenseData = new FormData();\n    expenseData.append(\"mem_count\", Number(mem_count));\n    expenseData.append(\"name\", expenseName);\n    expenseData.append(\"you_paid\", Number(totalAmount));\n    let youLent = Number((totalAmount - amountPerHead).toFixed(2));\n    expenseData.append(\"you_lent\", Number(youLent));\n    expenseData.append(\"on_month\", this.getMonth());\n    expenseData.append(\"on_date\", Number(new Date().getDate()));\n    expenseData.append(\"groups_id\", Number(this.props.current_data.id));\n\n    axios({\n      method: \"post\",\n      url: \"/app/add/expense\",\n      data: expenseData,\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n    })\n      .then(response => console.log(response))\n      .catch(error => console.log(error));\n\n    alert(\"Expense Added!\");\n    this.refs.description.value = \"\";\n    this.refs.amount.value = \"\";\n\n    /*\n    let expenses = this.props.current_data.expenses;\n    let expensesSize = expenses ? Object.keys(expenses).length : 0;\n    let expenseName = this.refs.description.value;\n    let totalAmount = this.refs.amount.value;\n    let { members_count } = this.props.current_data;\n    let amountPerHead = Number(\n      (Number(totalAmount) / (Number(members_count) + 1)).toFixed(2)\n    );\n\n    let updateCurrentData = JSON.parse(JSON.stringify(this.props.current_data));\n    console.log(this.props.current_data);\n    let newExpense = {};\n    newExpense[\"id\"] = !expensesSize ? 0 : expenses[expensesSize - 1][\"id\"] + 1;\n    newExpense[\"members_count\"] = members_count;\n    newExpense[\"expense_\" + expensesSize] = expenseName;\n    newExpense[\"youPaid_\" + expensesSize] = totalAmount;\n    newExpense[\"youLent_\" + expensesSize] = (\n      totalAmount - amountPerHead\n    ).toFixed(2);\n    newExpense[\"onMonth\"] = this.getMonth();\n    newExpense[\"onDate\"] = new Date().getDate();\n    updateCurrentData.expenses.push(newExpense);\n    for (var i = 0; i < updateCurrentData.friends_name.length; i++) {\n      updateCurrentData.friends_name[i][\"owes_\" + i] = Number(\n        (\n          updateCurrentData.friends_name[i][\"owes_\" + i] + amountPerHead\n        ).toFixed(2)\n      );\n      if (!expensesSize) {\n        updateCurrentData.friends_name[i][\"from_expense\"] = expensesSize;\n      }\n    }\n    //console.log(updateCurrentData.friends_name);\n\n    updateCurrentData.owed = Number(\n      (\n        Number(updateCurrentData.owed) +\n        Number((totalAmount - amountPerHead).toFixed(2))\n      ).toFixed(2)\n    );\n\n    //this.setState({ current_data: updateCurrentData });\n    AddGroup.setAddExpense(updateCurrentData, () => alert(\"Expense Added!\"));\n\n    this.refs.description.value = \"\";\n    this.refs.amount.value = \"\";\n\n    //this.props.history.push(\"/dashboard\");\n    */\n  };\n\n  render() {\n    return (\n      <Modal\n        {...this.props}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            Add expense\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div>\n            <h6>\n              With{\" \"}\n              <b>\n                <i>you</i>\n              </b>{\" \"}\n              and all of:{\" \"}\n              <b>\n                <i>{this.props.group_name}</i>\n              </b>\n            </h6>\n          </div>\n          <div>\n            <center>\n              <span style={{ marginRight: \"20px\" }}>\n                <i className=\"fa fa-arrow-down\"></i>\n              </span>\n              <label>\n                <i>Enter a description</i>\n              </label>\n            </center>\n            <center>\n              <input type=\"text\" placeholder=\"Description\" ref=\"description\" />\n            </center>\n            <center>\n              <input type=\"text\" placeholder=\"Amount in Rs.\" ref=\"amount\" />\n            </center>\n            <center>\n              <label>\n                <i>Enter amount</i>\n              </label>{\" \"}\n              <span style={{ marginLeft: \"60px\" }}>\n                <i className=\"fa fa-arrow-up\"></i>\n              </span>\n            </center>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.addExpense}>Add</Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default AddExpense;\n"]},"metadata":{},"sourceType":"module"}