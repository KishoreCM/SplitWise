{"ast":null,"code":"var _jsxFileName = \"/home/system8/Desktop/MyFirstReactApp/Node_Sequelize/splitwise/src/components/signupform.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport applogo from \"../splitwiselogo-01.png\";\nimport axios from \"axios\";\n\nclass SignUpForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      password: \"\",\n      nameError: \"\",\n      emailError: \"\",\n      phoneError: \"\",\n      passwordError: \"\",\n      groups: []\n    };\n\n    this.onNameChange = e => {\n      this.setState({\n        name: e.target.value\n      });\n    };\n\n    this.onEmailChange = e => {\n      this.setState({\n        email: e.target.value\n      });\n    };\n\n    this.onPhoneChange = e => {\n      this.setState({\n        phone: e.target.value\n      });\n    };\n\n    this.onPassTyped = e => {\n      this.setState({\n        password: e.target.value\n      }); //console.log(this.state);\n    };\n\n    this.alreadyUser = prevUsers => {\n      const currentUser = this.state;\n      const userAlready = prevUsers.filter(user => user.email === currentUser.email); //console.log(userAlready);\n\n      return userAlready[0] === undefined ? false : true;\n    };\n\n    this.submitDetails = e => {\n      e.preventDefault();\n\n      if (!this.validateForm()) {\n        let currentUsers;\n        let getPrevUsers = JSON.parse(localStorage.getItem(\"signedInUsers\")); //console.log(\"getPrevUsers\", getPrevUsers);\n\n        if (getPrevUsers !== null) {\n          let alreadyUser = this.alreadyUser(getPrevUsers);\n          console.log(alreadyUser);\n\n          if (alreadyUser) {\n            alert(\"The user with this credentials is been registered already. Try loggin in...\");\n          } else {\n            currentUsers = this.state;\n            console.log(\"currentUsers\", currentUsers);\n            let updatedUsers = getPrevUsers.push(currentUsers);\n            console.log(\"updatedUsers\", updatedUsers);\n            localStorage.setItem(\"signedInUsers\", JSON.stringify(getPrevUsers));\n            alert(\"Successfully Registered\");\n            this.props.history.push(\"/login\");\n          }\n        } else {\n          //currentUsers = [];\n          //currentUsers.push(this.state);\n          //localStorage.setItem(\"signedInUsers\", JSON.stringify(currentUsers));\n          //alert(\"Successfully Registered\");\n          let formData = new FormData();\n          formData.append(\"name\", this.state.name);\n          formData.append(\"email\", this.state.email);\n          formData.append(\"phone\", this.state.phone);\n          formData.append(\"password\", this.state.password);\n          console.log(formData);\n          axios({\n            method: \"post\",\n            url: \"app/add/users\",\n            data: formData,\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          }).then(response => //handle success\n          console.log(response)).catch(response => //handle error\n          console.log(response));\n          this.props.history.push(\"/login\");\n          this.setState({\n            name: \"\",\n            email: \"\",\n            phone: \"\",\n            password: \"\"\n          });\n        }\n      }\n    };\n  }\n\n  validateForm() {\n    let error = false;\n    let emailRegEx = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n    let phRegEx = /^\\d{10}$/;\n    this.setState({\n      nameError: \"\",\n      emailError: \"\",\n      phoneError: \"\",\n      passwordError: \"\"\n    });\n\n    if (!this.state.name) {\n      this.setState({\n        nameError: \"Name cannot be empty\"\n      });\n      error = true;\n    }\n\n    if (!emailRegEx.test(this.state.email)) {\n      this.setState({\n        emailError: \"Enter a valid Email address\"\n      });\n      error = true;\n    }\n\n    if (!phRegEx.test(this.state.phone)) {\n      this.setState({\n        phoneError: \"Phone number isn't valid\"\n      });\n      error = true;\n    }\n\n    if (this.state.password.length < 5) {\n      this.setState({\n        passwordError: \"Password atleast must be of length 5\"\n      });\n      error = true;\n    }\n\n    return error ? true : false;\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: applogo,\n      alt: \"SplitWise Logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      className: \"form-control\",\n      onChange: this.onNameChange,\n      placeholder: \"Your Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.state.nameError), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      type: \"email\",\n      value: this.state.email,\n      className: \"form-control\",\n      onChange: this.onEmailChange,\n      placeholder: \"Your Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, this.state.emailError), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Phone\"), React.createElement(\"input\", {\n      type: \"tel\",\n      value: this.state.phone,\n      className: \"form-control\",\n      onChange: this.onPhoneChange,\n      placeholder: \"Your Number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, this.state.phoneError), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      className: \"form-control\",\n      onChange: this.onPassTyped,\n      placeholder: \"Your Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, this.state.passwordError), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary btn-block\",\n      onClick: this.submitDetails,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Sign Up\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Already have an account?, Log In!\")))));\n  }\n\n}\n\nexport default SignUpForm;","map":{"version":3,"sources":["/home/system8/Desktop/MyFirstReactApp/Node_Sequelize/splitwise/src/components/signupform.jsx"],"names":["React","Component","Link","applogo","axios","SignUpForm","state","name","email","phone","password","nameError","emailError","phoneError","passwordError","groups","onNameChange","e","setState","target","value","onEmailChange","onPhoneChange","onPassTyped","alreadyUser","prevUsers","currentUser","userAlready","filter","user","undefined","submitDetails","preventDefault","validateForm","currentUsers","getPrevUsers","JSON","parse","localStorage","getItem","console","log","alert","updatedUsers","push","setItem","stringify","props","history","formData","FormData","append","method","url","data","headers","then","response","catch","error","emailRegEx","phRegEx","test","length","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport applogo from \"../splitwiselogo-01.png\";\nimport axios from \"axios\";\n\nclass SignUpForm extends Component {\n  state = {\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    password: \"\",\n    nameError: \"\",\n    emailError: \"\",\n    phoneError: \"\",\n    passwordError: \"\",\n    groups: []\n  };\n\n  onNameChange = e => {\n    this.setState({ name: e.target.value });\n  };\n\n  onEmailChange = e => {\n    this.setState({ email: e.target.value });\n  };\n\n  onPhoneChange = e => {\n    this.setState({ phone: e.target.value });\n  };\n\n  onPassTyped = e => {\n    this.setState({ password: e.target.value });\n    //console.log(this.state);\n  };\n\n  alreadyUser = prevUsers => {\n    const currentUser = this.state;\n    const userAlready = prevUsers.filter(\n      user => user.email === currentUser.email\n    );\n    //console.log(userAlready);\n    return userAlready[0] === undefined ? false : true;\n  };\n\n  validateForm() {\n    let error = false;\n    let emailRegEx = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n    let phRegEx = /^\\d{10}$/;\n\n    this.setState({\n      nameError: \"\",\n      emailError: \"\",\n      phoneError: \"\",\n      passwordError: \"\"\n    });\n\n    if (!this.state.name) {\n      this.setState({ nameError: \"Name cannot be empty\" });\n      error = true;\n    }\n\n    if (!emailRegEx.test(this.state.email)) {\n      this.setState({ emailError: \"Enter a valid Email address\" });\n      error = true;\n    }\n\n    if (!phRegEx.test(this.state.phone)) {\n      this.setState({ phoneError: \"Phone number isn't valid\" });\n      error = true;\n    }\n\n    if (this.state.password.length < 5) {\n      this.setState({ passwordError: \"Password atleast must be of length 5\" });\n      error = true;\n    }\n\n    return error ? true : false;\n  }\n\n  submitDetails = e => {\n    e.preventDefault();\n\n    if (!this.validateForm()) {\n      let currentUsers;\n      let getPrevUsers = JSON.parse(localStorage.getItem(\"signedInUsers\"));\n      //console.log(\"getPrevUsers\", getPrevUsers);\n\n      if (getPrevUsers !== null) {\n        let alreadyUser = this.alreadyUser(getPrevUsers);\n        console.log(alreadyUser);\n        if (alreadyUser) {\n          alert(\n            \"The user with this credentials is been registered already. Try loggin in...\"\n          );\n        } else {\n          currentUsers = this.state;\n          console.log(\"currentUsers\", currentUsers);\n          let updatedUsers = getPrevUsers.push(currentUsers);\n          console.log(\"updatedUsers\", updatedUsers);\n          localStorage.setItem(\"signedInUsers\", JSON.stringify(getPrevUsers));\n          alert(\"Successfully Registered\");\n          this.props.history.push(\"/login\");\n        }\n      } else {\n        //currentUsers = [];\n        //currentUsers.push(this.state);\n        //localStorage.setItem(\"signedInUsers\", JSON.stringify(currentUsers));\n        //alert(\"Successfully Registered\");\n        let formData = new FormData();\n        formData.append(\"name\", this.state.name);\n        formData.append(\"email\", this.state.email);\n        formData.append(\"phone\", this.state.phone);\n        formData.append(\"password\", this.state.password);\n        console.log(formData);\n        axios({\n          method: \"post\",\n          url: \"app/add/users\",\n          data: formData,\n          headers: { \"Content-Type\": \"multipart/form-data\" }\n        })\n          .then(response =>\n            //handle success\n            console.log(response)\n          )\n          .catch(response =>\n            //handle error\n            console.log(response)\n          );\n\n        this.props.history.push(\"/login\");\n\n        this.setState({\n          name: \"\",\n          email: \"\",\n          phone: \"\",\n          password: \"\"\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <center>\n          <img src={applogo} alt=\"SplitWise Logo\" />\n        </center>\n        <div className=\"form\">\n          <div className=\"container\">\n            <form>\n              <div className=\"form-group\">\n                <label>Name</label>\n                <input\n                  type=\"text\"\n                  value={this.state.name}\n                  className=\"form-control\"\n                  onChange={this.onNameChange}\n                  placeholder=\"Your Name\"\n                />\n              </div>\n              <div className=\"panel\">{this.state.nameError}</div>\n              <div className=\"form-group\">\n                <label>Email</label>\n                <input\n                  type=\"email\"\n                  value={this.state.email}\n                  className=\"form-control\"\n                  onChange={this.onEmailChange}\n                  placeholder=\"Your Email\"\n                />\n              </div>\n              <div className=\"panel\">{this.state.emailError}</div>\n              <div className=\"form-group\">\n                <label>Phone</label>\n                <input\n                  type=\"tel\"\n                  value={this.state.phone}\n                  className=\"form-control\"\n                  onChange={this.onPhoneChange}\n                  placeholder=\"Your Number\"\n                />\n              </div>\n              <div className=\"panel\">{this.state.phoneError}</div>\n\n              <div className=\"form-group\">\n                <label>Password</label>\n                <input\n                  type=\"password\"\n                  value={this.state.password}\n                  className=\"form-control\"\n                  onChange={this.onPassTyped}\n                  placeholder=\"Your Password\"\n                />\n              </div>\n              <div className=\"panel\">{this.state.passwordError}</div>\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary btn-block\"\n                onClick={this.submitDetails}\n              >\n                Sign Up\n              </button>\n            </form>\n            <br />\n            <center>\n              <Link to=\"/login\">Already have an account?, Log In!</Link>\n            </center>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SignUpForm;\n"]},"metadata":{},"sourceType":"module"}